<html>

<head>
    <title>Printer Tool</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-dark-5@1.1.3/dist/css/bootstrap-dark-plugin.min.css"
        rel="stylesheet">
    <meta name="theme-color" content="#111111" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#eeeeee" media="(prefers-color-scheme: dark)">
</head>
<body>
    <a href="https://github.com/cellivar/webzlp" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <!--
        This part is just evil shenanigans to make the demo work, you can ignore it.

        For those curious, this import map redirects import statements such that a Service Worker
        can intercept them. The SW itself has the typescript compiler loaded, and it will recompile
        the imported modules on the fly before sending them to the browser as javascript.

        The page itself sends inline TS through the same flow, triggering the same module loading, so
        even inline typescript works.
    -->
    <script type="importmap">
        {
          "imports": {
            "webzlp": "../src/index.ts",
            "ts-pattern": "https://unpkg.com/ts-pattern@4.0.5/dist/index.modern.js"
          }
        }
    </script>
    <script type="module" src="./ts-browser.js"></script>

    <!-- Here's some actual demo code. Note that it is typescript, not javascript. -->
    <script type="text/typescript">
        import {
            IDocument,
            ILabelDocumentBuilder,
            PrinterUsbManager,
            PrinterCommunicationOptions,
            PrintSpeed,
            Printer,
            ReadyToPrintDocuments
        } from 'webzlp';

        // For this demo we're going to make use of the USB printer manager
        // so it can take care of concerns like the USB connect and disconnect events.

        // Enable debugging, so the dev console can fill up with interesting messages!
        const debugOpts = new PrinterCommunicationOptions();
        debugOpts.debug = true;
        const printerMgr = new PrinterUsbManager(window.navigator, debugOpts);

        // We'll wire up some basic event listeners to the printer manager.
        // First, a button to prompt a user to add a printer.
        const addPrinterBtn = document.getElementById('addprinter');
        addPrinterBtn.addEventListener('click', async () => printerMgr.promptToConnectUsbPrinter());

        // Next a button to manually refresh all printers, just in case.
        const refreshPrinterBtn = document.getElementById('refreshPrinters');
        refreshPrinterBtn.addEventListener('click', async () => printerMgr.reconnectAllPrinters());

        // Next we wire up some events on the PrinterUsbManager itself.
        printerMgr.addEventListener('connectedPrinter', ({ detail }) => {
            const printer = detail;
            console.log('New printer is a', printer.printerModel.model);
            const config = printer.printerConfig;
            console.log('Printer darkness is', config.darknessPercent, 'percent');
            console.log('Printer speed is', PrintSpeed[config.speed.printSpeed]);
            console.log(
                'Label is',
                config.labelWidthInches,
                'in wide and',
                config.labelHeightInches,
                'in tall, with a gap of',
                config.labelGapInches,
                'in.');
        });
        // There's also an event that will tell you when a printer disconnects.
        printerMgr.addEventListener('disconnectedPrinter', ({ detail }) => {
            const printer = detail;
            // TODO: Hide appropriate interface.
            console.log('Lost printer', printer.printerModel.model, 'serial', printer.printerConfig.serialNumber);
        });

        // When the browser first loaded the page any previously connected printers would have caused
        // a connection event. Our listener wasn't listening yet so missed it.
        // It's good practice to force a reconnect once your event handlers are ready.
        // We're going to skip this for now though, because we want it to happen after the app is ready.
        //await printerMgr.reconnectAllPrinters();

        // And that's all there is to setup! The page can now talk to printers.
        // If you're using a chromebook this should just work. If you're on Windows
        // you might need to do some driver setup, see the repo README for more details.

        // The rest of this demo is an example of a basic label generator app.

        // The app's logic is wrapped in a class just for ease of reading.
        class BasicLabelDesignerApp {
            constructor(
                manager: PrinterUsbManager,
                btnContainer: HTMLElement,
                labelForm: HTMLElement,
                labelFormInstructions: HTMLElement,
                configModal: HTMLElement
            ) {
                this.manager = manager;
                this.btnContainer = btnContainer;
                this.labelForm = labelForm;
                this.labelFormInstructions = labelFormInstructions;
                this.configModal = configModal;

                // Based on the containers, map the various listeners.
                this.configModalHandle = new bootstrap.Modal(this.configModal);
                this.configModal
                    .querySelector('form')
                    .addEventListener('submit', this.updatePrinterConfig.bind(this));
                this.labelForm.addEventListener('blur', this.renderTextForm.bind(this));
                this.labelForm.addEventListener('keyup', this.renderTextForm.bind(this));

                // Add a second set of event listeners for printer connect and disconnect to redraw
                // the printer list when it changes.
                this.manager.addEventListener('connectedPrinter', ({ detail }) => {
                    this.activePrinterIndex = -1;
                    this.redrawPrinterButtons();
                });
                this.manager.addEventListener('disconnectedPrinter', ({ detail }) => {
                    this.activePrinterIndex = -1;
                    this.redrawPrinterButtons();
                });

                // Let's load a nice font that looks good in monochrome and use that for labels.
                this.fontName = "emojisymbols";
                // EmojiSymbols Font (c)blockworks - Kenichi Kaneko http://emojisymbols.com/
                const font = new FontFace(this.fontName, 'url(fonts/EmojiSymbols-Regular.woff)');
                font.load().then(() => {
                    document.fonts.add(font);
                });
            }

            // Some storage fields and utility properties
            private btnContainer: HTMLElement;
            private labelForm: HTMLElement;
            private labelFormInstructions: HTMLElement;
            private configModal: HTMLElement;
            private fontName: string;
            private manager: PrinterUsbManager;
            get printers(): readonly Printer[] {
                return this.manager.printers;
            }

            // Track which printer is currently selected for operations
            private _activePrinter = 0;
            get activePrinter(): Printer {
                return this._activePrinter < 0 || this._activePrinter > this.printers.length
                    ? null
                    : this.printers[this._activePrinter];
            }
            set activePrinterIndex(printerIdx: number) {
                this._activePrinter = printerIdx;
                this.redrawTextCanvas();
            }

            /** Initialize the app */
            public async init() {
                this.redrawPrinterButtons();
                this.redrawTextCanvas();
            }

            /** Display the configuration for a printer. */
            public showConfigModal(printer: Printer, printerIdx: number) {
                if (printer == null) {
                    return;
                }
                const config = printer.printerConfig;

                // Translate the available speeds to options to be selected
                const speedSelect = this.configModal.querySelector('#modalSpeed');
                speedSelect.innerHTML = '';
                const speedTable = printer.printerModel.speedTable as ReadonlyMap<PrintSpeed, number>;
                for (const [key, val] of speedTable) {
                    // Skip utility values, so long as there's more than the defaults.
                    // Mobile printers *only* support auto, for example.
                    if ((speedTable.length > 3)
                        && (key == PrintSpeed.auto
                            || key == PrintSpeed.ipsPrinterMax
                            || key == PrintSpeed.ipsPrinterMin)) {
                        continue;
                    }
                    const opt = document.createElement('option');
                    opt.value = key;
                    opt.innerHTML = PrintSpeed[key].substring(3).replaceAll('_', '.') + ' ips';
                    speedSelect.appendChild(opt);
                }
                speedSelect.value = config.speed.printSpeed;

                this.configModal.querySelector('#modalPrinterIndex').value = config.serialNumber;
                this.configModal.querySelector('#modalPrinterIndexText').textContent = printerIdx;
                this.configModal.querySelector('#modalLabelWidth').value = config.labelWidthInches;
                this.configModal.querySelector('#modalLabelHeight').value = config.labelHeightInches;
                this.configModal.querySelector('#modalDarkness').value = config.darknessPercent;
                this.configModalHandle.show();
            }

            /** Erase and re-draw the list of printer buttons in the UI. */
            private redrawPrinterButtons() {
                this.btnContainer.innerHTML = '';
                this.printers.forEach((printer, idx) => this.drawPrinterButton(printer, idx));
            }

            /** Highlight only the currently selected printer. */
            private redrawPrinterButtonHighlights() {
                this.printers.forEach((printer, idx) => {
                    const element = document.getElementById(`printer_${idx}`);
                    const highlight = this._activePrinter == idx ? "var(--bs-blue)" : "transparent";
                    element.style.background = `linear-gradient(to right, ${highlight}, ${highlight}, grey, grey)`;
                });
            }

            /** Add a printer's button UI to the list of printers. */
            private drawPrinterButton(printer: Printer, idx: number) {
                const highlight = this._activePrinter == idx ? "var(--bs-blue)" : "transparent";

                // Generate a new label printer button for the given printer.
                const element = document.createElement("div");
                element.innerHTML = `
    <li id="printer_${idx}" data-printer-idx="${idx}"
        class="list-group-item d-flex flex-row justify-content-between sligh-items-start"
        style="background: linear-gradient(to right, ${highlight}, ${highlight}, grey, grey);">
        <div class="col-sm-8">
            <div class="col-sm-12">
                <span data-serial="${printer.printerConfig.serialNumber}">${printer.printerConfig.serialNumber}</span>
            </div>
            <div class="col-sm-12">
                <span>${printer.printerConfig.labelWidthInches}" x ${printer.printerConfig.labelHeightInches}"</span>
            </div>
        </div>
        <div class="d-flex flex-row justify-content-end">
            <div class="btn-group" role="group" aria-label="Printer button group">
                <button id="printto_${idx}" class="btn btn-success btn-lg" data-label-width="${printer.labelWidth}" data-label-height="${printer.labelHeight}" data-printer-idx="${idx}">ðŸ–¨</button>
                    <button class="btn btn-success dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                        <span class="visually-hidden">Settings</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a id="printtest_${idx}" data-printer-idx="${idx}" class="dropdown-item" href="#">
                            Print test page
                        </a></li>
                        <li><a id="feedlabel_${idx}" data-printer-idx="${idx}" class="dropdown-item" href="#">
                            Feed blank label
                        </a></li>
                        <li><a id="configprinter_${idx}" data-printer-idx="${idx}" class="dropdown-item" href="#">
                            Set label config
                        </a></li>
                        <li><a id="printconfig_${idx}" data-printer-idx="${idx}" class="dropdown-item" href="#">
                            Print config on labels
                        </a></li>
                    </ul>
                </div>
            </div>
        </div>
    </li>`;
                // And slap it into the button container.
                this.btnContainer.appendChild(element);

                // Then wire up the button events so they work.
                document.getElementById(`printto_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        const printer = this.printers[printerIdx];
                        const doc = this.addCanvasImageToLabelDoc(printer.getLabelDocument());
                        await printer.sendDocument(doc);
                    });
                document.getElementById(`printer_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        this.activePrinterIndex = printerIdx;
                        this.redrawPrinterButtonHighlights();
                        this.redrawTextCanvas();
                    });
                document.getElementById(`printtest_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        const printer = this.printers[printerIdx];
                        const doc = ReadyToPrintDocuments.printTestLabelDocument(
                            printer.printerConfig.labelWidthDots);
                        await printer.sendDocument(doc);
                    });
                document.getElementById(`feedlabel_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        const printer = this.printers[printerIdx];
                        const doc = ReadyToPrintDocuments.feedLabelDoc;
                        await printer.sendDocument(doc);
                    });
                document.getElementById(`printconfig_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        const printer = this.printers[printerIdx];
                        const doc = ReadyToPrintDocuments.printerPrintConfigDoc;
                        await printer.sendDocument(doc);
                    });
                document.getElementById(`configprinter_${idx}`)
                    .addEventListener('click', async (e) => {
                        e.preventDefault();
                        const printerIdx = e.currentTarget.dataset.printerIdx as number;
                        const printer = this.printers[printerIdx];
                        this.showConfigModal(printer, printerIdx);
                    });
            }

            /** Redraw the text canvas size according to the printer. */
            private redrawTextCanvas() {
                const printer = this.activePrinter;
                if (printer == null) {
                    this.labelForm.classList.add('d-none');
                    this.labelFormInstructions.classList.remove('d-none');
                    return;
                } else {
                    this.labelForm.classList.remove('d-none');
                    this.labelFormInstructions.classList.add('d-none');
                }

                // Resize the canvas to match the label size.
                const canvas = this.labelForm.querySelector("#labelCanvas") as HTMLCanvasElement;
                // Add a small margin as printer alignment is not exact.
                canvas.width = printer.printerConfig.labelWidthDots - 2;
                canvas.height = printer.printerConfig.labelHeightDots - 2;

                const textarea = this.labelForm.querySelector('#labelFormText') as HTMLTextAreaElement;
                textarea.value = "Enter your label text here!";
                this.renderTextForm(null);
            }

            /** Render the text form to the canvas */
            private renderTextForm(e: KeyboardEvent) {
                const printer = this.activePrinter;
                if (printer == null) {
                    return;
                }

                const textarea = this.labelForm.querySelector('#labelFormText') as HTMLTextAreaElement;
                const canvas = this.labelForm.querySelector("#labelCanvas") as HTMLCanvasElement;
                const c = canvas.getContext('2d');

                // We're doing this the quick and dirty way, clearing the rectangle each time and
                // redrawing all of the text. A more complex app could do this more gracefully!
                c.clearRect(0, 0, canvas.width, canvas.height);
                c.font = `30pt ${this.fontName}`;
                c.imageSmoothingEnabled = false;
                c.fillStyle = "#000000";

                // fillText doesn't do newlines, do that manually
                textarea.value.split('\n').forEach((l, i) => {
                    c.fillText(l, 5, (i * 31) + 30);
                })
            }

            /** Render the canvas to a document for printing */
            private addCanvasImageToLabelDoc(builder: ILabelDocumentBuilder): IDocument {
                const canvas = this.labelForm.querySelector("#labelCanvas") as HTMLCanvasElement;
                const imgData = canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);

                // One of the benefits of this library is being able to render images to a canvas element
                // and sending that canvas directly to a label. This allows your webpage to generate complex
                // images and fonts (like emoji!) that EPL/ZPL can't support.
                return builder
                    .addImage(imgData)
                    .addPrintCmd()
                    .finalize();
            }

            /** Send the contents of the config form as a config label to the printer. */
            private async updatePrinterConfig(e: SubmitEvent) {
                e.preventDefault();

                // Figure out the right printer
                const formElement = this.configModal.querySelector('form');
                const form = formElement.elements as HTMLFormControlsCollection;
                const printerIdx = parseInt(formElement.querySelector('#modalPrinterIndexText').innerText);
                const printer = this.printers[printerIdx];
                if (printer == null) {
                    return;
                }

                form.modalSubmit.setAttribute("disabled", "");
                form.modalCancel.setAttribute("disabled", "");

                // Pull the values out of the form.
                const darkness = parseInt(form.modalDarkness.value) as NumericRange<1, 100>;
                const rawSpeed = parseInt(form.modalSpeed.value) as PrintSpeed;
                const labelWidthInches = parseFloat(form.modalLabelWidth.value);
                const autosense = form.modalWithAutosense.checked;

                // Construct the config document with the values from the form
                const configDoc = printer
                    .getConfigDocument()
                    .setPrintDirection()
                    .setPrintSpeed(rawSpeed)
                    .setDarknessConfig(darkness)
                    .setLabelDimensions(labelWidthInches);
                const doc = autosense
                    ? configDoc.autosenseLabelLength()
                    : configDoc.finalize();
                // And send the whole shebang to the printer!
                await printer.sendDocument(doc);

                form.modalSubmit.removeAttribute("disabled");
                form.modalCancel.removeAttribute("disabled");
                this.activePrinterIndex = printerIdx;
                this.configModalHandle.hide();
            }
        }

        // With the app class defined we can run it.
        // First up collect the basic structure of the app
        const btnContainer = document.getElementById("printerlist");
        const labelForm = document.getElementById("labelForm");
        const labelFormInstructions = document.getElementById("labelFormInstructions");
        const configModal = document.getElementById("printerOptionModal");

        // And feed that into the app class to manage the elements
        const app = new BasicLabelDesignerApp(printerMgr, btnContainer, labelForm, labelFormInstructions, configModal);
        // and let it take over the UI.
        await app.init();

        // Now we'll fire the reconnect since our UI is wired up.
        await printerMgr.reconnectAllPrinters();

        // A couple of last minute things.
        // This bit detects if the operating system is Windows and shows a little warning about the
        // Windows print driver conflicting with WebUSB.
        if (navigator.appVersion.indexOf('Win') != -1) {
            document.getElementById('windowsDriverWarning').classList.remove('d-none');
        }
        // This bit detects if the browser supports WebUSB, displaying a warning if not.
        if (navigator.usb == null) {
            document.getElementById('browserNoWebUsb').classList.remove('d-none');
        }
    </script>
    <row>
        <div class="container-fluid">
            <div class="col-md-9 offset-md-1" style="margin-top: 5px">
                <div class="alert alert-warning alert-dismissible d-none" role="alert" id="windowsDriverWarning">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    <h4>Windows may need extra configuration</h4>
                    <p>It looks like your operating system is Windows. The <a href="https://web.dev/build-for-webusb/#windows">windows driver model conflicts with WebUSB</a> and might prevent this page from working with a printer.</p>
                    <p>To make this demo work you'll need to <a href="https://cellivar.github.io/WebZLP/docs/windows_driver">set up your driver correctly</a>. You'll see errors in the developer console if it isn't configured correctly.</p>
                </div>
                <div class="alert alert-warning d-none" role="alert" id="browserNoWebUsb">
                    <h4>Your browser doesn't support WebUSB</h4>
                    <p>This demo uses WebUSB to function and your browser doesn't seem to have that available.</p>
                </div>
            </div>
        </div>
    </row>
    <row>
        <div class="container-fluid">
            <div class="row" style="padding-top: 16px;">
                <div class="col-3">
                    <div class="d-grid gap-2 col-8 mx-auto mb-3">
                        <div class="row">
                            <div class="col-9">
                                <button class="btn btn-primary" id="addprinter">âž• Add Printer</button>
                            </div>
                            <div class="col-3">
                                <button class="btn btn-success" id="refreshPrinters">ðŸ”ƒ</button>
                            </div>
                        </div>
                    </div>
                    <ol id="printerlist" class="list-group list-group-numbered">
                    </ol>
                </div>
                <div class="col-9">
                    <form id="labelForm" action="javascript:void(0);" class="d-none">
                        <h5>Preview</h5>
                        <canvas id="labelCanvas" width="584" height="160" style="border: 2px solid blue; background-color: white; margin-bottom: 10px;"></canvas>
                        <h5>Input</h5>
                        <textarea id="labelFormText" name="labelText" cols="40" rows="10" wrap="hard"
                            style="font-family: monospace; resize: both;"
                            placeholder="Enter your label text here!"></textarea>
                    </form>
                    <div id="labelFormInstructions">
                        <p>Connect a printer to your computer, then click Add Printer!</p>
                        <p>Once a printer is connected select it by clicking on it on the left.</p>
                    </div>
                </div>
            </div>
        </div>
    </row>
    <div id="printerOptionModal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <form id="printerSettingsForm">
                    <div class="modal-header">
                        <h5 class="modal-title">Label Settings</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <label for="modalPrinterIndex" class="form-label">Printer ID</label>
                        <div class="input-group mb-3">
                            <span id="modalPrinterIndexText" class="input-group-text">42Q424242424</span>
                            <input id="modalPrinterIndex" class="form-control" type="text" value="-1"
                                aria-label="Printer ID" aria-describedby="modalPrinterIndexText" disabled readonly>
                        </div>
                        <div class="mb-3">
                            <div class="row">
                                <div class="col">
                                    <label for="modalLabelWidth" class="form-label">Label Width</label>
                                    <div class="input-group mb-3">
                                        <input id="modalLabelWidth" type="text" class="form-control" placeholder="2.25"
                                            aria-label="Width" required pattern="\d+\.*\d*">
                                        <span id="modalLabelWidthText" class="input-group-text">in</span>
                                    </div>
                                </div>
                                <div class="col">
                                    <label for="modalLabelHeight" class="form-label">Label Height</label>
                                    <div class="input-group mb-3">
                                        <input id="modalLabelHeight" type="text" class="form-control" placeholder="2.25"
                                            aria-label="Height" required pattern="\d+\.*\d*" readonly>
                                        <span id="modalLabelHeightText" class="input-group-text">in</span>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="form-check form-switch">
                                        <input id="modalWithAutosense" type="checkbox" role="switch" class="form-check-input"
                                            aria-label="RunAutosense">
                                        <label for="modalWithAutosense" class="form-check-label">Perform autosense</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="row">
                                <div class="col row mb-3">
                                    <label for="modalDarkness" class="col-sm-5 col-form-label">Darkness</label>
                                    <div class="col-sm-7">
                                        <div class="input-group col-sm-7">
                                            <input type="number" min="1" max="99" id="modalDarkness" class="form-control" aria-label="Darkness"/>
                                            <span class="input-group-text">%</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col row mb-3">
                                    <label for="modalSpeed" class="col-sm-5 col-form-label">Speed</label>
                                    <div class="col-sm-7">
                                        <select id="modalSpeed" class="form-select" aria-label="Speed">
                                            <option value="3">1.5 ips</option>
                                            <option value="4">2 ips</option>
                                            <option value="5">2.5 ips</option>
                                            <option value="7">3.5 ips</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button id="modalCancel" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <input id="modalSubmit" type="submit" class="btn btn-primary" value="Save">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
</body>

</html>